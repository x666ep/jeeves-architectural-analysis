<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="500.3411px" preserveAspectRatio="none" style="width:422px;height:500px;background:#FFFFFF;" version="1.1" viewBox="0 0 422 500" width="422.5811px" zoomAndPan="magnify"><defs/><g><ellipse cx="204.2794" cy="12.7475" fill="#222222" rx="6.3738" ry="6.3738" style="stroke:#222222;stroke-width:0.6373771928514165;"/><rect fill="#F1F1F1" height="21.7555" rx="7.9672" ry="7.9672" style="stroke:#181818;stroke-width:0.31868859642570824;" width="244.7528" x="81.903" y="59.9135"/><text fill="#000000" font-family="sans-serif" font-size="7.6485" lengthAdjust="spacing" textLength="232.0053" x="88.2767" y="73.6818">Для каждого отношения вызываем CalculatePersonalLicences</text><polygon fill="#F1F1F1" points="125.2446,122.4611,283.3142,122.4611,290.9627,130.1096,283.3142,137.7581,125.2446,137.7581,117.5961,130.1096,125.2446,122.4611" style="stroke:#181818;stroke-width:0.31868859642570824;"/><text fill="#000000" font-family="sans-serif" font-size="7.0111" lengthAdjust="spacing" textLength="158.0695" x="125.2446" y="132.7593">Является ли лицензия в правиле НЕактивной?</text><text fill="#000000" font-family="sans-serif" font-size="7.0111" lengthAdjust="spacing" textLength="8.9233" x="290.9627" y="128.6307">no</text><polygon fill="#F1F1F1" points="67.562,179.825,340.9968,179.825,348.6453,187.4735,340.9968,195.1221,67.562,195.1221,59.9135,187.4735,67.562,179.825" style="stroke:#181818;stroke-width:0.31868859642570824;"/><text fill="#000000" font-family="sans-serif" font-size="7.0111" lengthAdjust="spacing" textLength="273.4348" x="67.562" y="190.1233">У сотрудника уже есть активированная лицензия или она ожидает активации?</text><text fill="#000000" font-family="sans-serif" font-size="7.0111" lengthAdjust="spacing" textLength="8.9233" x="348.6453" y="185.9946">no</text><polygon fill="#F1F1F1" points="105.4859,243.5204,303.0729,243.5204,310.7214,251.1689,303.0729,258.8175,105.4859,258.8175,97.8374,251.1689,105.4859,243.5204" style="stroke:#181818;stroke-width:0.31868859642570824;"/><text fill="#000000" font-family="sans-serif" font-size="7.0111" lengthAdjust="spacing" textLength="197.5869" x="105.4859" y="253.8187">Лицензия не активируется автоматом и она уже выдана?</text><text fill="#000000" font-family="sans-serif" font-size="7.0111" lengthAdjust="spacing" textLength="8.9233" x="310.7214" y="249.69">no</text><rect fill="#F1F1F1" height="21.7555" rx="7.9672" ry="7.9672" style="stroke:#181818;stroke-width:0.31868859642570824;" width="228.8184" x="89.8702" y="300.8844"/><text fill="#000000" font-family="sans-serif" font-size="7.6485" lengthAdjust="spacing" textLength="216.0709" x="96.244" y="314.6527">создаем персональную лицензию со статусом "выдана"</text><polygon fill="#F1F1F1" points="123.3325,335.3874,285.2263,335.3874,292.8748,343.0359,285.2263,350.6844,123.3325,350.6844,115.684,343.0359,123.3325,335.3874" style="stroke:#181818;stroke-width:0.31868859642570824;"/><text fill="#000000" font-family="sans-serif" font-size="7.0111" lengthAdjust="spacing" textLength="161.8938" x="123.3325" y="345.6856">Лицензия требует автоматической активации?</text><text fill="#000000" font-family="sans-serif" font-size="7.0111" lengthAdjust="spacing" textLength="8.9233" x="106.7607" y="341.557">no</text><rect fill="#F1F1F1" height="21.7555" rx="7.9672" ry="7.9672" style="stroke:#181818;stroke-width:0.31868859642570824;" width="181.0151" x="208.741" y="357.0582"/><text fill="#000000" font-family="sans-serif" font-size="7.6485" lengthAdjust="spacing" textLength="168.2676" x="215.1148" y="370.8265">устанавливаем статус "ожидает активации"</text><polygon fill="#F1F1F1" points="42.0669,94.4165,366.4919,94.4165,374.1404,102.065,366.4919,109.7135,42.0669,109.7135,34.4184,102.065,42.0669,94.4165" style="stroke:#181818;stroke-width:0.31868859642570824;"/><text fill="#000000" font-family="sans-serif" font-size="7.0111" lengthAdjust="spacing" textLength="324.425" x="42.0669" y="104.7147">Собираем массив персональных лицензий для выдачи перебирая правила и лицензии в них</text><ellipse cx="204.2794" cy="411.9573" fill="#F1F1F1" rx="6.3738" ry="6.3738" style="stroke:#181818;stroke-width:0.31868859642570824;"/><path d="M204.9255,412.0743 L203.9844,409.6916 L203.0395,412.0743 Z M205.7546,414.1881 L205.1533,412.6569 L202.8117,412.6569 L202.2029,414.1881 L201.4747,414.1881 L203.6669,408.6609 L204.4437,408.6609 L206.6023,414.1881 Z " fill="#000000"/><polygon fill="#F1F1F1" points="130.981,31.8689,277.5778,31.8689,285.2263,39.5174,277.5778,47.1659,130.981,47.1659,123.3325,39.5174,130.981,31.8689" style="stroke:#181818;stroke-width:0.31868859642570824;"/><text fill="#000000" font-family="sans-serif" font-size="7.0111" lengthAdjust="spacing" textLength="146.5968" x="130.981" y="42.1671">Перебираем массив ProfileLicenceRelation</text><rect fill="#F1F1F1" height="21.7555" rx="7.9672" ry="7.9672" style="stroke:#181818;stroke-width:0.31868859642570824;" width="302.7542" x="52.9023" y="445.1009"/><text fill="#000000" font-family="sans-serif" font-size="7.6485" lengthAdjust="spacing" textLength="290.0066" x="59.2761" y="458.8693">возвращаем массив персональных лицензий для активации/деактивации</text><ellipse cx="204.2794" cy="486.6151" fill="none" rx="7.0111" ry="7.0111" style="stroke:#222222;stroke-width:0.6373771928514165;"/><ellipse cx="204.2794" cy="486.6151" fill="#222222" rx="3.8243" ry="3.8243" style="stroke:#111111;stroke-width:0.6373771928514165;"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="204.2794" x2="204.2794" y1="137.7581" y2="150.5057"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="204.2794" x2="26.7698" y1="150.5057" y2="150.5057"/><polygon fill="#181818" points="33.1436,147.9562,26.7698,150.5057,33.1436,153.0552,30.5941,150.5057" style="stroke:#181818;stroke-width:0.6373771928514165;"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="290.9627" x2="298.6112" y1="130.1096" y2="130.1096"/><polygon fill="#181818" points="296.0617,144.1319,298.6112,150.5057,301.1607,144.1319,298.6112,146.6814" style="stroke:#181818;stroke-width:0.6373771928514165;"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="298.6112" x2="298.6112" y1="130.1096" y2="167.0775"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="298.6112" x2="204.2794" y1="167.0775" y2="167.0775"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="204.2794" x2="204.2794" y1="167.0775" y2="179.825"/><polygon fill="#181818" points="201.7299,173.4512,204.2794,179.825,206.8289,173.4512,204.2794,176.0008" style="stroke:#181818;stroke-width:0.6373771928514165;"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="204.2794" x2="204.2794" y1="195.1221" y2="207.8696"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="204.2794" x2="26.7698" y1="207.8696" y2="207.8696"/><polygon fill="#181818" points="33.1436,205.3201,26.7698,207.8696,33.1436,210.4191,30.5941,207.8696" style="stroke:#181818;stroke-width:0.6373771928514165;"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="348.6453" x2="356.2939" y1="187.4735" y2="187.4735"/><polygon fill="#181818" points="353.7443,201.4958,356.2939,207.8696,358.8434,201.4958,356.2939,204.0454" style="stroke:#181818;stroke-width:0.6373771928514165;"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="356.2939" x2="356.2939" y1="187.4735" y2="224.4414"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="356.2939" x2="204.2794" y1="224.4414" y2="224.4414"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="204.2794" x2="204.2794" y1="224.4414" y2="243.5204"/><polygon fill="#181818" points="201.7299,237.1466,204.2794,243.5204,206.8289,237.1466,204.2794,239.6962" style="stroke:#181818;stroke-width:0.6373771928514165;"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="204.2794" x2="204.2794" y1="258.8175" y2="271.565"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="204.2794" x2="26.7698" y1="271.565" y2="271.565"/><polygon fill="#181818" points="33.1436,269.0155,26.7698,271.565,33.1436,274.1145,30.5941,271.565" style="stroke:#181818;stroke-width:0.6373771928514165;"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="310.7214" x2="318.3699" y1="251.1689" y2="251.1689"/><polygon fill="#181818" points="315.8204,265.1912,318.3699,271.565,320.9194,265.1912,318.3699,267.7407" style="stroke:#181818;stroke-width:0.6373771928514165;"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="318.3699" x2="318.3699" y1="251.1689" y2="288.1368"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="318.3699" x2="204.2794" y1="288.1368" y2="288.1368"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="204.2794" x2="204.2794" y1="288.1368" y2="300.8844"/><polygon fill="#181818" points="201.7299,294.5106,204.2794,300.8844,206.8289,294.5106,204.2794,297.0601" style="stroke:#181818;stroke-width:0.6373771928514165;"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="115.684" x2="109.3102" y1="343.0359" y2="343.0359"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="109.3102" x2="109.3102" y1="343.0359" y2="357.0582"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="109.3102" x2="26.7698" y1="357.0582" y2="357.0582"/><polygon fill="#181818" points="33.1436,354.5087,26.7698,357.0582,33.1436,359.6077,30.5941,357.0582" style="stroke:#181818;stroke-width:0.6373771928514165;"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="292.8748" x2="299.2486" y1="343.0359" y2="343.0359"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="299.2486" x2="299.2486" y1="343.0359" y2="357.0582"/><polygon fill="#181818" points="296.6991,350.6844,299.2486,357.0582,301.7981,350.6844,299.2486,353.2339" style="stroke:#181818;stroke-width:0.6373771928514165;"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="299.2486" x2="299.2486" y1="378.8137" y2="385.1875"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="299.2486" x2="398.6794" y1="385.1875" y2="385.1875"/><polygon fill="#181818" points="396.1299,251.891,398.6794,245.5172,401.2289,251.891,398.6794,249.3415" style="stroke:#181818;stroke-width:0.6373771928514165;"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="398.6794" x2="398.6794" y1="102.065" y2="385.1875"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="398.6794" x2="374.1404" y1="102.065" y2="102.065"/><polygon fill="#181818" points="380.5142,99.5155,374.1404,102.065,380.5142,104.6145,377.9647,102.065" style="stroke:#181818;stroke-width:0.6373771928514165;"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="204.2794" x2="204.2794" y1="322.6398" y2="335.3874"/><polygon fill="#181818" points="201.7299,329.0136,204.2794,335.3874,206.8289,329.0136,204.2794,331.5631" style="stroke:#181818;stroke-width:0.6373771928514165;"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="204.2794" x2="204.2794" y1="109.7135" y2="122.4611"/><polygon fill="#181818" points="201.7299,116.0873,204.2794,122.4611,206.8289,116.0873,204.2794,118.6368" style="stroke:#181818;stroke-width:0.6373771928514165;"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="34.4184" x2="26.7698" y1="102.065" y2="102.065"/><polygon fill="#181818" points="24.2203,242.9677,26.7698,249.3415,29.3194,242.9677,26.7698,245.5172" style="stroke:#181818;stroke-width:0.6373771928514165;"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="26.7698" x2="26.7698" y1="102.065" y2="392.836"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="26.7698" x2="204.2794" y1="392.836" y2="392.836"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="204.2794" x2="204.2794" y1="392.836" y2="405.5835"/><polygon fill="#181818" points="201.7299,399.2098,204.2794,405.5835,206.8289,399.2098,204.2794,401.7593" style="stroke:#181818;stroke-width:0.6373771928514165;"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="204.2794" x2="204.2794" y1="81.6689" y2="94.4165"/><polygon fill="#181818" points="201.7299,88.0427,204.2794,94.4165,206.8289,88.0427,204.2794,90.5922" style="stroke:#181818;stroke-width:0.6373771928514165;"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="204.2794" x2="204.2794" y1="47.1659" y2="59.9135"/><polygon fill="#181818" points="201.7299,53.5397,204.2794,59.9135,206.8289,53.5397,204.2794,56.0892" style="stroke:#181818;stroke-width:0.6373771928514165;"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="204.2794" x2="204.2794" y1="418.3311" y2="424.7048"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="204.2794" x2="406.328" y1="424.7048" y2="424.7048"/><polygon fill="#181818" points="403.7785,239.7385,406.328,233.3647,408.8775,239.7385,406.328,237.189" style="stroke:#181818;stroke-width:0.6373771928514165;"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="406.328" x2="406.328" y1="39.5174" y2="424.7048"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="406.328" x2="285.2263" y1="39.5174" y2="39.5174"/><polygon fill="#181818" points="291.6001,36.9679,285.2263,39.5174,291.6001,42.0669,289.0506,39.5174" style="stroke:#181818;stroke-width:0.6373771928514165;"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="123.3325" x2="15.2971" y1="39.5174" y2="39.5174"/><polygon fill="#181818" points="12.7475,230.8152,15.2971,237.189,17.8466,230.8152,15.2971,233.3647" style="stroke:#181818;stroke-width:0.6373771928514165;"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="15.2971" x2="15.2971" y1="39.5174" y2="432.3534"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="15.2971" x2="204.2794" y1="432.3534" y2="432.3534"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="204.2794" x2="204.2794" y1="432.3534" y2="445.1009"/><polygon fill="#181818" points="201.7299,438.7271,204.2794,445.1009,206.8289,438.7271,204.2794,441.2766" style="stroke:#181818;stroke-width:0.6373771928514165;"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="204.2794" x2="204.2794" y1="19.1213" y2="31.8689"/><polygon fill="#181818" points="201.7299,25.4951,204.2794,31.8689,206.8289,25.4951,204.2794,28.0446" style="stroke:#181818;stroke-width:0.6373771928514165;"/><line style="stroke:#181818;stroke-width:0.6373771928514165;" x1="204.2794" x2="204.2794" y1="466.8564" y2="479.6039"/><polygon fill="#181818" points="201.7299,473.2302,204.2794,479.6039,206.8289,473.2302,204.2794,475.7797" style="stroke:#181818;stroke-width:0.6373771928514165;"/><!--MD5=[c4f7037e88ba28a9f9d2cd62051b8c28]
@startuml CalculatePersonalLicences_1
skinparam ConditionEndStyle hline
scale max 500 height
    start
        while (Перебираем массив ProfileLicenceRelation)
            :Для каждого отношения вызываем CalculatePersonalLicences;
            while (Собираем массив персональных лицензий для выдачи перебирая правила и лицензии в них)
                if (Является ли лицензия в правиле НЕактивной?) then (no)
                else
                    break
                endif
                if (У сотрудника уже есть активированная лицензия или она ожидает активации?) then (no)
                else
                    break
                endif
                if (Лицензия не активируется автоматом и она уже выдана?) then (no)
                else
                    break
                endif
                :создаем персональную лицензию со статусом "выдана";
                if (Лицензия требует автоматической активации?) then (no)
                    break
                else
                    :устанавливаем статус "ожидает активации";
                endif
            endwhile
        (A)
        endwhile
        :возвращаем массив персональных лицензий для активации/деактивации;
    stop
@enduml

PlantUML version 1.2022.7(Mon Aug 22 20:01:30 MSK 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: RU
--></g></svg>